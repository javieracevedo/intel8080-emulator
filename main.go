package main

import (
	"8080/cpu"
	"fmt"
)

var testInstructions = []byte{
	0b00000000, // NOP
	0b01000000, // MOV B,B
	0b01000001, // MOV B,C
	0b01000010, // MOV B,D
	0b01000011, // MOV B,E
	0b01000100, // MOV B,H
	0b01000101, // MOV B,L
	0b01000110, // MOV B,M
	0b01000111, // MOV B,A
	0b01001000, // MOV C,B
	0b01001001, // MOV C,C
	0b01001010, // MOV C,D
	0b01001011, // MOV C,E
	0b01001100, // MOV C,H
	0b01001101, // MOV C,L
	0b01001110, // MOV C,M
	0b01001111, // MOV C,A
	0b01010000, // MOV D,B
	0b01010001, // MOV D,C
	0b01010010, // MOV D,D
	0b01010011, // MOV D,E
	0b01010100, // MOV D,H
	0b01010101, // MOV D,L
	0b01010110, // MOV D,M
	0b01010111, // MOV D,A
	0b01011000, // MOV E,B
	0b01011001, // MOV E,C
	0b01011010, // MOV E,D
	0b01011011, // MOV E,E
	0b01011100, // MOV E,H
	0b01011101, // MOV E,L
	0b01011110, // MOV E,M
	0b01011111, // MOV E,A
	0b01100000, // MOV H,B
	0b01100001, // MOV H,C
	0b01100010, // MOV H,D
	0b01100011, // MOV H,E
	0b01100100, // MOV H,H
	0b01100101, // MOV H,L
	0b01100110, // MOV H,M
	0b01100111, // MOV H,A
	0b01101000, // MOV L,B
	0b01101001, // MOV L,C
	0b01101010, // MOV L,D
	0b01101011, // MOV L,E
	0b01101100, // MOV L,H
	0b01101101, // MOV L,L
	0b01101110, // MOV L,M
	0b01101111, // MOV L,A
	0b01111000, // MOV A,B
	0b01111001, // MOV A,C
	0b01111010, // MOV A,D
	0b01111011, // MOV A,E
	0b01111100, // MOV A,H
	0b01111101, // MOV A,L
	0b01111110, // MOV A,M
	0b01111111, // MOV A,A
	0b01110000, // MOV M,B
	0b01110001, // MOV M,C
	0b01110010, // MOV M,D
	0b01110011, // MOV M,E
	0b01110100, // MOV M,H
	0b01110101, // MOV M,L
	0b01110111, // MOV M,A
}

func main() {
	c := cpu.CPU{}
	c.Init()

	for _, v := range testInstructions {
		c.Execute(v)
	}

	c.DebugRegisters()

	fmt.Printf("T-state Cycles Count: %d\n", c.CyclesCount)
}
